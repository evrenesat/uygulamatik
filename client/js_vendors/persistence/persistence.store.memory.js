try{if(!window){window={}}}catch(e){window={};exports.console=console}var persistence=(window&&window.persistence)?window.persistence:{};if(!persistence.store){persistence.store={}}persistence.store.memory={};persistence.store.memory.config=function(m,j){var o=m.argspec;j=j||"persistenceData";var i={};m.getAllObjects=function(){return i};var k=m.add;m.add=function(a){if(!this.trackedObjects[a.id]){k.call(this,a);var b=a._type;if(!i[b]){i[b]=new m.LocalQueryCollection();i[b]._session=m}i[b].add(a)}return this};var l=m.remove;m.remove=function(a){l.call(this,a);var b=a._type;i[b].remove(a)};m.schemaSync=function(b,c,a){var d=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction,defaultValue:null},{name:"callback",optional:true,check:o.isCallback(),defaultValue:function(){}},{name:"emulate",optional:true,check:o.hasType("boolean")}]);d.callback()};m.flush=function(f,a){var d=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction},{name:"callback",optional:true,check:o.isCallback(),defaultValue:function(){}}]);var c=m.flushHooks;var b=this;m.asyncForEach(c,function(h,g){h(b,f,g)},function(){var h=m.trackedObjects;for(var g in h){if(h.hasOwnProperty(g)){if(m.objectsToRemove.hasOwnProperty(g)){delete h[g]}else{h[g]._dirtyProperties={}}}}d.callback()})};m.transaction=function(a){setTimeout(function(){a({executeSql:function(){}})},0)};m.loadFromLocalStorage=function(a){var b=window.localStorage.getItem(j);if(b){this.loadFromJson(b,a)}else{a&&a()}};m.saveToLocalStorage=function(a){this.dumpToJson(function(b){window.localStorage.setItem(j,b);if(a){a()}})};m.reset=function(b,c){var a=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction,defaultValue:null},{name:"callback",optional:true,check:o.isCallback(),defaultValue:function(){}}]);b=a.tx;c=a.callback;i={};this.clean();c()};m.close=function(){};function n(b){var a=i[b._entityName];if(!a){a=new m.LocalQueryCollection()}a=a.clone();a._filter=b._filter;a._prefetchFields=b._prefetchFields;a._orderColumns=b._orderColumns;a._limit=b._limit;a._skip=b._skip;a._reverse=b._reverse;return a}m.DbQueryCollection.prototype.list=function(b,c){var a=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction,defaultValue:null},{name:"callback",optional:false,check:o.isCallback()}]);b=a.tx;c=a.callback;var d=n(this);d.list(null,c)};m.DbQueryCollection.prototype.destroyAll=function(b,c){var a=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction,defaultValue:null},{name:"callback",optional:true,check:o.isCallback(),defaultValue:function(){}}]);b=a.tx;c=a.callback;var d=n(this);d.destroyAll(null,c)};m.DbQueryCollection.prototype.count=function(b,c){var a=o.getArgs(arguments,[{name:"tx",optional:true,check:m.isTransaction,defaultValue:null},{name:"callback",optional:false,check:o.isCallback()}]);b=a.tx;c=a.callback;var d=n(this);d.count(null,c)};m.ManyToManyDbQueryCollection=function(a,b){this.init(a,b,m.ManyToManyDbQueryCollection);this._items=[]};m.ManyToManyDbQueryCollection.prototype=new m.LocalQueryCollection();m.ManyToManyDbQueryCollection.prototype.initManyToMany=function(a,b){this._obj=a;this._coll=b};m.ManyToManyDbQueryCollection.prototype.add=function(a,d){m.LocalQueryCollection.prototype.add.call(this,a);if(!d){var c=m.getMeta(this._obj._type);var b=c.hasMany[this._coll].inverseProperty;m.get(a,b).add(this._obj,true)}};m.ManyToManyDbQueryCollection.prototype.remove=function(a,d){m.LocalQueryCollection.prototype.remove.call(this,a);if(!d){var c=m.getMeta(this._obj._type);var b=c.hasMany[this._coll].inverseProperty;m.get(a,b).remove(this._obj,true)}}};try{exports.config=persistence.store.memory.config;exports.getSession=function(){return persistence}}catch(e){};